# Node.js with webpack
# Publish package to the NPM Rrepository using cicclient feed
# Procedure to get and publish repo locally: 
# https://docs.microsoft.com/en-us/azure/devops/artifacts/get-started-npm?view=azure-devops#set-up-authentication-on-your-development-machine
# Need to be authenticate using npm login
# https://docs.microsoft.com/azure/devops/pipelines/languages/javascript

trigger:
  - main

pool:
  vmImage: ubuntu-latest

stages:
- stage: dev
  displayName: Development
  jobs:
    - job: deploy
      displayName: Deploy Client API types
      steps:
        - checkout: self
          submodules: true
        - task: Npm@1
          inputs:
            command: publish
            publishRegistry: useFeed
            publishFeed: Content Platform/content-platform-npm
